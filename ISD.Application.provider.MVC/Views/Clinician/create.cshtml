@using ISD.Util
@using Microsoft.AspNet.Identity
@model ISD.Application.provider.MVC.Models.CliniciansModels

@{
    ViewBag.Title = "Create new clinian";
}
@Styles.Render("~/assets/plugins/sky-forms/version-2.0.1/css/custom-sky-forms.css")
<div class="breadcrumbs">
    <div class="container">
        <h1 class="pull-left">Create clinician</h1>
        <ul class="pull-right breadcrumb">
            <li><a href="index.html">Home</a></li>
            <li><a href="@Url.Content("~/Clinicians/")">Clinician</a></li>
            <li class="active">Create</li>
        </ul>
    </div>
</div>
<div class="content container">
    @Html.ValidationSummary(true, "", new { @class = "text-danger" })
    <div class="row">
        <div class="col-md-12">

            @using (Html.BeginForm("CopyClinician", "Clinician", FormMethod.Get, new { @class = "sky-form" }))
            {
                <fieldset>
                    <div class="row">
                        <section class="col col-md-5">
                            <label class="input select">
                                @Html.DropDownListFor(x => x.CopyClinician,
                                 new SelectList(Model.CliniciansList,
                                "Value", "Text",
                                Model.CliniciansList.First().Value))
                                @Html.ValidationMessageFor(model => model.CliniciansList, "", new { @class = "text-danger" })
                                <i></i>
                            </label>

                        </section>
                        <section class="col col-md-7">
                            <input type="submit" value="Copy" class="btn-u" />
                        </section>
                    </div>
                </fieldset>
            }

            @using (Html.BeginForm("Create", "Clinician", FormMethod.Post, new { @class = "sky-form" }))
            {
                @Html.AntiForgeryToken()
                <fieldset>
                    <div class="row">
                        <section class="col col-md-6">
                            <label class="input">
                                <i class="icon-prepend fa fa-file"></i>
                                @Html.EditorFor(model => model.SavedName, new { htmlAttributes = new { @placeholder = "Saved title. ex: StaffName_Dietitian_Richmond" } })
                                @Html.ValidationMessageFor(model => model.ClinicianName, "", new { @class = "text-danger" })
                            </label>
                        </section>



                        <section class="col col-md-6">
                            <label class="input">
                                <i class="icon-prepend fa fa-user"></i>
                                @Html.EditorFor(model => model.ClinicianName, new { htmlAttributes = new { @placeholder = "Full name" } })
                                @Html.ValidationMessageFor(model => model.ClinicianName, "", new { @class = "text-danger" })
                            </label>
                        </section>
                    </div>
                    <div class="row">
                        <section class="col col-6">
                            <label class="input">
                                <i class="icon-prepend fa fa-envelope"></i>
                                @Html.EditorFor(model => model.ClinicianEmail, new { htmlAttributes = new { @placeholder = "E-mail", @type = "email" } })
                                @Html.ValidationMessageFor(model => model.ClinicianEmail, "", new { @class = "text-danger" })
                            </label>
                        </section>
                        <section class="col col-6">
                            <label class="input">
                                <i class="icon-prepend fa fa-phone"></i>
                                @Html.EditorFor(model => model.Phone, new { htmlAttributes = new { @placeholder = "Phone" } })
                                @Html.ValidationMessageFor(model => model.Phone, "", new { @class = "text-danger" })
                            </label>
                        </section>
                    </div>
                    <div class="row">
                        <section class="col col-md-6">
                            <label class="select select-multiple">
                                @{
                var clinics = new ISD.Data.EDM.ISDEntities().Clinic.ToList();
                                }

                                @Html.DropDownListFor(model => model.Location, new SelectList(@clinics, "ID", "Name"), new { @class = "multiselect", @multiple = "multiple" })
                                @Html.ValidationMessageFor(model => model.Location, "", new { @class = "text-danger" })
                            </label><div class="note"><strong>Note:</strong> hold down the ctrl/cmd button to select multiple options.</div>
                        </section>
                        <section class="col col-md-6">
                            <label class="input select">
                                @Html.DropDownListFor(model => model.ClinicianType,
                new SelectList(Model.clinicianTypes,
                               "Value", "Text",
                               Model.clinicianTypes.First().Value))
                                @Html.ValidationMessageFor(model => model.ClinicianType, "", new { @class = "text-danger" })
                                <i></i>
                            </label>
                        </section>
                    </div>
                    <div class="row">
                        <section class="col col-md-12">
                            <label class="textarea">
                                @Html.EditorFor(model => model.StaffSpecialties, new { htmlAttributes = new { @placeholder = "Specialties", @rows = "4", maxlength = 500 } })
                                @Html.ValidationMessageFor(model => model.StaffSpecialties, "", new { @class = "text-danger" })
                            </label>
                        </section>
                    </div>
                    <div class="row">
                        <label class="label">Timetable</label>
                        <section class="col col-md-6">
                            <div class="row">

                                @{
                if (Model.TimetableType == 0)
                {
                    <div class="col col-6">
                        <label class="radio state-success"><input type="radio" name="TimetableType" value="1" id="enableTT" class="radio" /><i class="rounded-x"></i> Yes</label>
                    </div>
                                    <div class="col col-6">
                                        <label class="radio state-success"><input type="radio" name="TimetableType" value="0" id="DisableTT" class="radio" checked="checked" /><i class="rounded-x"></i> No   </label>
                                    </div>
                }
                else
                {
                    <div class="col col-6">
                        <label class="radio state-success"><input type="radio" name="TimetableType" value="1" id="enableTT" class="radio" checked="checked" /><i class="rounded-x"></i> Yes</label>
                    </div>
                                    <div class="col col-6">
                                        <label class="radio state-success"><input type="radio" name="TimetableType" value="0" id="DisableTT" class="radio" /><i class="rounded-x"></i> No   </label>
                                    </div>
                }


                                }
                                @Html.ValidationMessageFor(model => model.TimetableType, "", new { @class = "text-danger" })

                            </div>
                        </section>







                    </div>

                </fieldset>
    <fieldset id="fldttlb" class="desc">
        <div id="partial">

        </div>
        <div class="footer">
            <input type="button" id="mybutton" value="Add new Item" />
        </div>

    </fieldset>
                <fieldset>
                    <div class="form-horizontal">
                        <div class="form-group">
                            <div class="col-md-offset-9 col-md-3">
                                <input type="submit" value="create" class="btn-u" />&nbsp;&nbsp;
                                @Html.ActionLink("Cancel", "", "Clinicians", null, new { @class = "btn-u btn-u-red" })
                            </div>
                        </div>
                    </div>
                </fieldset>
            }  <div>
                @Html.ActionLink("Back to List", "Index")
            </div>
        </div>



    </div>
</div>


@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}
<script>


    $("input[name$='TimetableType']").change(
function (e) {
    if ($("#enableTT").is(':checked')) {
        $("#fldttlb").show();
    }
    else {
        $("#fldttlb").hide();
    }
});

    $(document).ready(function () {
        if ($("#enableTT").is(':checked')) {
            $("#fldttlb").show();
        }
        else {
            $("#fldttlb").hide();
        }
    });

    $("#mybutton").click(function () {

        var url = "/Clinician/Timetable";

        $.ajax({
            url: url,
            cache: false,
            type: "POST",
            success: function (data) {


                $('#partial').append(data);
                /* little fade in effect */
                $('#partial').fadeIn('fast');

            },
            error: function (reponse) {
                alert("error : " + reponse);
            }
        });

    });

</script>